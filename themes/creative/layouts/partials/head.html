<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
{{ with .Site.Params.name }}<meta name="author" content="{{ . }}">{{ end }}
{{ with .Site.Params.description }}<meta name="description" content="{{ . }}">{{ end }}
{{ .Hugo.Generator }}
<title>{{ .Site.Title }}</title>

{{ "<!-- Favicon -->" | safeHTML }}
<link rel="shortcut icon" href="{{ .Site.Params.favicon | relURL }}">
{{ "<!-- Bootstrap Core CSS -->" | safeHTML }}
<link rel="stylesheet" href="{{ "css/bootstrap.min.css" | relURL }}" type="text/css">
{{ "<!-- Custom Fonts -->" | safeHTML }}
<link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="{{ "font-awesome/css/font-awesome.min.css" | relURL }}" type="text/css">
{{ "<!-- Plugin CSS -->" | safeHTML }}
<link rel="stylesheet" href="{{ "css/animate.min.css" | relURL }}" type="text/css">
{{ "<!-- Custom CSS -->" | safeHTML }}
<link rel="stylesheet" href="{{ "css/creative.css" | relURL }}" type="text/css">
<link rel="stylesheet" href="{{ "css/modals.css" | relURL }}" type="text/css">

{{ "<!-- our own custom css must be placed at last to cover the theme style -->" | safeHTML }}
<link rel="stylesheet" href="{{ "css/custom/index.css" | relURL }}" type="text/css">

{{ "<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->" | safeHTML }}
{{ "<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->" | safeHTML }}
{{ "<!--[if lt IE 9]>" | safeHTML }}
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
{{ "<![endif]-->" | safeHTML }}
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script src="https://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
 //是否显示导航栏
 var showNavBar = true;
 //是否展开导航栏
 var expandNavBar = true;
 //是否给标题自动增加序号
 var addSNToTitle = true;

 $(document).ready(function(){
    var urlArr = window.location.pathname.split('/')
    if(urlArr[2] == 'posts'){
        var h1s = $("body").find("h1");
        var h2s = $("body").find("h2");
        var h3s = $("body").find("h3");
        var h4s = $("body").find("h4");
        var h5s = $("body").find("h5");
        var h6s = $("body").find("h6");

        var headCounts = [h1s.length, h2s.length, h3s.length, h4s.length, h5s.length, h6s.length];
        var vH1Tag = null;
        var vH2Tag = null;
        for(var i = 0; i < headCounts.length; i++){
                if(headCounts[i] > 0){
                if(vH1Tag == null){
                        vH1Tag = 'h' + (i + 1);
                }else if(vH2Tag == null){
                        vH2Tag = 'h' + (i + 1);
                        break;
                }
                }
        }
        if(vH1Tag == null){
                return;
        }
        var anchorTitle = urlArr[1]== 'en' ? "Contents▲": "目录▲";
        console.log(anchorTitle)
        $("body").prepend('<div class="BlogAnchor">' + 
                '<p>' + 
                '<b id="AnchorContentToggle" title="收起" style="cursor:pointer;">'+anchorTitle+'</b>' + 
                '</p>' + 
                '<div class="AnchorContent" id="AnchorContent"> </div>' + 
        '</div>' );

        var vH1Index = 0;
        var vH2Index = 0;
        $("body").find(vH1Tag + (vH2Tag != null ? (','+vH2Tag) : '')).each(function(i,item){
                var id = '';
                var name = '';
                var tag = $(item).get(0).tagName.toLowerCase();
                var className = '';
                if(tag == vH1Tag){
                id = name = ++vH1Index;
                name = id;
                vH2Index = 0;
                className = 'item_h1';
                }else if(tag == vH2Tag){
                id = vH1Index + '_' + ++vH2Index;
                name = vH1Index + '.' + vH2Index;
                className = 'item_h2';
                }
                $(item).attr("id","wow"+id);
                        $(item).addClass("wow_head");
                        var originText = $(item).text();
                         
                $("#AnchorContent").css('max-height', ($(window).height() - 180) + 'px');
                $("#AnchorContent").append('<li><a class="nav_item '+className+' anchor-link" onclick="return false;" href="#" link="#wow'+id+'">'+name+" · "+originText+'</a></li>');
        });

        $("#AnchorContentToggle").click(function(){
                var text = $(this).html();
                if(text=="目录▲"||text=="Contents▲"){
                        var anchorTitle = urlArr[1]== 'cn' ? "目录▼": "Contents▼";
                        $(this).html(anchorTitle);
                }else{
                        var anchorTitle = urlArr[1]== 'en' ? "Contents▲": "目录▲";
                        $(this).html(anchorTitle);
                }
                $("#AnchorContent").toggle();
        });
        $(".anchor-link").click(function(){
                $("html,body").animate({scrollTop: $($(this).attr("link")).offset().top-50}, 500);
        });

                var headerNavs = $(".BlogAnchor li .nav_item");
                var headerTops = [];
                $(".wow_head").each(function(i, n){
                        headerTops.push($(n).offset().top);
                });
                $(window).scroll(function(){
                        var scrollTop = $(window).scrollTop();
                        $.each(headerTops, function(i, n){
                                var distance = n - scrollTop;
                                if(distance >= 0){
                                        $(".BlogAnchor li .nav_item.current").removeClass('current');
                                        $(headerNavs[i]).addClass('current');
                                        return false;
                                }
                        });
                });

                if(!showNavBar){
                        $('.BlogAnchor').hide();
                }
                if(!expandNavBar){
                        $(this).html("目录▼");
                $(this).attr({"title":"展开"});
                        $("#AnchorContent").hide();
                }
    }

 });
</script>